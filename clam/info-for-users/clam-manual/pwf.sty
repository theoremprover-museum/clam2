% improved macros for setting potential wave-fronts
% img/mrg/jun-93 (img@ai.ed.ac.uk)
% bug fixed; added pwfout and pwf in 10-june-94/img
\newcount \tx
\newcount \ty
\newdimen \drop
\newcommand{\pwf}[1]{\setbox0\hbox{$#1$}\drop=\dp0
	\setbox0\hbox{\hskip\fboxsep\vbox{\vskip\fboxsep
		\box0\vskip\fboxsep}\hskip\fboxsep}\tx=\wd0
	\ty=\ht0 \advance\ty by \dp0 % Y size
	\divide \tx \unitlength	     % number of units X
	\divide \ty  \unitlength     % number of units Y
	\ifodd\tx \advance \tx by 1\fi % for better results (see LaTeX manual)
	\ifodd\ty \advance \ty by 1\fi
	\advance\drop by \fboxsep
	\setbox1=\hbox{\dashbox{2}(\tx,\ty){\copy0}}\hbox{\lower\drop\box1}}

\newcommand{\pwfout}[1]{\pwf{#1}^\uparrow}
\newcommand{\pwfin}[1]{\pwf{#1}^\downarrow}
\endinput
	

